!function(a){Drupal.theme.prototype.pulVersaillesExampleButton=function(b,c){return a('<a href="'+b+'" title="'+c+'">'+c+"</a>")},Drupal.behaviors.pulVersaillesExampleBehavior={attach:function(b,c){a(".some-selector",b).once("foo",function(){var a=Drupal.theme("pulVersaillesExampleButton",c.myExampleLinkPath,c.myExampleLinkTitle);a.appendTo(this)})}},Drupal.behaviors.pulVersaillesMapBehavior={attach:function(b){a(".map",b).once("iif-leaflet",function(){!function(a,b,c){"use strict";function d(a,b){var c=new XMLHttpRequest;c.overrideMimeType("application/json"),c.open("GET",a,!0),console.log(c),c.onreadystatechange=function(){4==c.readyState&&"200"==c.status&&b(c.responseText)},c.send(null)}function e(a,b){var c=a.properties.field_image_id,d="",e=a.properties.rotation||0,f=a.properties.name||"",h=g+a.properties.nid,j="";j=0!==e?"full/,"+i+"/"+e+"/native.jpg":"full/"+i+",/"+e+"/native.jpg",c&&(d=c.replace(new RegExp("(.*/)[^/]+$"),"$1")+j);var k='<div style="width:'+i+'px;""><a class="popup" href='+h+'><h3 class="popup-text">'+f+"</h3><img src="+d+"></a></div>";b.bindPopup(k,{minWidth:i})}function f(){d(j,function(a){var b=JSON.parse(a),d=c.geoJson(b,{style:function(a){return a.properties&&a.properties.style},onEachFeature:e}),f=c.markerClusterGroup({spiderfyDistanceMultiplier:3,showCoverageOnHover:!1});f.addLayer(d),k.addLayer(f)})}c.Icon.Default.imagePath="images/";var g="http://libphp-prod.princeton.edu/versailles/item/",h="http://libimages.princeton.edu/loris2/exhibits%2FVersailles%2Fversailles_13%2FImage00120_vert.jp2/info.json",i=250,j="http://demoversailles.princeton.edu/versailles/map.json",k=c.map("map",{center:[0,0],crs:c.CRS.Simple,zoom:0}),l=c.tileLayer.iiif(h,{}).addTo(k);l.on("load",f)}(window,document,L)})}}}(jQuery);